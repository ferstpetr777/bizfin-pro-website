<link rel="stylesheet" href="/wp-content/themes/astra/bank-guarantee-styles.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">

<div class="bank-guarantee-page">
    <main>
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-container">
                <div class="hero-content">
                    <h1 class="gjs-t-h1 hero-title">
                        Гарантируем возврат аванса — надежно и быстро
                    </h1>
                    <p class="hero-subtitle">
                        Банковская гарантия защитит ваши авансовые платежи от рисков. Оформление от 24 часов, прозрачные условия, поддержка на каждом этапе.
                    </p>
                    <div class="hero-actions">
                        <a href="#contact" class="gjs-t-button hero-primary-cta">
                            Получить консультацию
                        </a>
                        <a href="#process" class="gjs-t-link hero-secondary-cta">
                            Как это работает
                            <img src="https://api.iconify.design/lucide-arrow-right.svg" alt="Подробнее" class="arrow-icon"/>
                        </a>
                    </div>
                    <ul class="hero-trust-bullets">
                        <li class="trust-item">
                            <img src="https://api.iconify.design/lucide-badge-check.svg" alt="Одобрено банками" class="trust-icon-shield"/>
                            <span class="trust-text">Работаем с ТОП-банками</span>
                        </li>
                        <li class="trust-item">
                            <img src="https://api.iconify.design/lucide-clock.svg" alt="Быстро" class="trust-icon-shield"/>
                            <span class="trust-text">Оформление от 24 часов</span>
                        </li>
                        <li class="trust-item">
                            <img src="https://api.iconify.design/lucide-lock.svg" alt="Безопасно" class="trust-icon-shield"/>
                            <span class="trust-text">Юридическая защита</span>
                        </li>
                    </ul>
                </div>
                <figure class="hero-image-wrapper">
                    <img src="https://app.grapesjs.com/api/assets/random-image?query=business%20handshake%20secure%20finance%20bank%20guarantee&w=1200&h=800" alt="Надежная банковская гарантия на возврат аванса" class="hero-image"/>
                </figure>
            </div>
        </section>

        <!-- Benefits Section -->
        <section id="benefits" class="benefits-section">
            <div class="benefits-container">
                <div class="benefits-header">
                    <h2 class="gjs-t-h2 benefits-title">Почему это выгодно</h2>
                    <p class="benefits-subtitle">
                        Вы получаете финансовую защиту и уверенность в исполнении обязательств ваших контрагентов.
                    </p>
                </div>
                <div class="benefits-grid">
                    <div class="gjs-t-border benefit-card">
                        <div class="benefit-icon-wrap">
                            <img src="https://api.iconify.design/lucide-shield-check.svg" alt="Надежность" class="benefit-icon"/>
                        </div>
                        <h3 class="benefit-title">Надежность и безопасность</h3>
                        <p class="benefit-text">Гарантия, подкрепленная банком, снижает риски срыва обязательств и потери средств.</p>
                    </div>
                    <div class="gjs-t-border benefit-card">
                        <div class="benefit-icon-wrap">
                            <img src="https://api.iconify.design/lucide-clock.svg" alt="Скорость" class="benefit-icon"/>
                        </div>
                        <h3 class="benefit-title">Быстрое оформление</h3>
                        <p class="benefit-text">Подготовка документов и выпуск гарантии от 24 часов при готовности пакета.</p>
                    </div>
                    <div class="gjs-t-border benefit-card">
                        <div class="benefit-icon-wrap">
                            <img src="https://api.iconify.design/lucide-badge-check.svg" alt="Гарантия возврата" class="benefit-icon"/>
                        </div>
                        <h3 class="benefit-title">Гарантия возврата средств</h3>
                        <p class="benefit-text">Если контрагент не исполнил условия — банк возвращает аванс по гарантии.</p>
                    </div>
                    <div class="gjs-t-border benefit-card">
                        <div class="benefit-icon-wrap">
                            <img src="https://api.iconify.design/lucide-user-cog.svg" alt="Индивидуальный подход" class="benefit-icon"/>
                        </div>
                        <h3 class="benefit-title">Индивидуальный подход</h3>
                        <p class="benefit-text">Подбираем условия под ваш договор и требования заказчика.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Process Section -->
        <section id="process" class="process-section">
            <div class="process-container">
                <div class="process-header">
                    <h2 class="gjs-t-h2 process-title">Как это работает</h2>
                    <p class="process-subtitle">Простой и прозрачный путь к получению банковской гарантии на возврат аванса.</p>
                </div>
                <div class="process-grid">
                    <div class="gjs-t-border process-step-card">
                        <div class="process-step-icon-wrap">
                            <img src="https://api.iconify.design/lucide-file-check.svg" alt="Заявка и документы" class="process-step-icon"/>
                        </div>
                        <div class="process-step-content">
                            <h3 class="process-step-title">1. Заявка и пакет документов</h3>
                            <p class="process-step-text">Вы оставляете заявку, мы помогаем собрать документы и проверяем условия договора.</p>
                        </div>
                    </div>
                    <div class="gjs-t-border process-step-card">
                        <div class="process-step-icon-wrap">
                            <img src="https://api.iconify.design/lucide-building-2.svg" alt="Одобрение банка" class="process-step-icon"/>
                        </div>
                        <div class="process-step-content">
                            <h3 class="process-step-title">2. Рассмотрение банком</h3>
                            <p class="process-step-text">Передаем документы в банк-партнер. Срок рассмотрения — от 1 рабочего дня.</p>
                        </div>
                    </div>
                    <div class="gjs-t-border process-step-card">
                        <div class="process-step-icon-wrap">
                            <img src="https://api.iconify.design/lucide-shield-check.svg" alt="Выпуск гарантии" class="process-step-icon"/>
                        </div>
                        <div class="process-step-content">
                            <h3 class="process-step-title">3. Выпуск гарантии</h3>
                            <p class="process-step-text">После одобрения банк выпускает гарантию в пользу вашего заказчика.</p>
                        </div>
                    </div>
                    <div class="gjs-t-border process-step-card">
                        <div class="process-step-icon-wrap">
                            <img src="https://api.iconify.design/lucide-badge-check.svg" alt="Поддержка" class="process-step-icon"/>
                        </div>
                        <div class="process-step-content">
                            <h3 class="process-step-title">4. Сопровождение</h3>
                            <p class="process-step-text">Сопровождаем до закрытия обязательств и при необходимости продлеваем гарантию.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Calculator Section -->
        <section id="calculator" class="calculator-section">
            <div class="calculator-container">
                <div class="calculator-header">
                    <h2 class="gjs-t-h2 calculator-title">Конструктор расчета стоимости банковской гарантии</h2>
                    <p class="calculator-subtitle">Укажите параметры договора, и мы мгновенно рассчитаем ориентировочную стоимость гарантии на возврат аванса.</p>
                </div>
                <div class="calculator-grid">
                    <form method="get" id="calcForm" class="gjs-t-border calculator-form">
                        <div class="calc-field">
                            <label for="amount" class="calc-label">Сумма аванса, ₽</label>
                            <input type="number" id="amount" min="1" step="1" required placeholder="Например, 5 000 000" class="calc-input"/>
                        </div>
                        <div class="calc-field">
                            <label for="term" class="calc-label">Срок гарантии, месяцев</label>
                            <select id="term" required class="calc-select">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3" selected>3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                        <div class="calc-field">
                            <label for="rating" class="calc-label">Кредитный рейтинг / показатель</label>
                            <input type="text" id="rating" placeholder="Например: высокий, средний, низкий или A/BBB/B" class="calc-input"/>
                        </div>
                        <button type="submit" class="gjs-t-button calc-button">
                            Рассчитать
                        </button>
                    </form>
                    <aside class="gjs-t-border calculator-result">
                        <div class="result-header">
                            <img src="https://api.iconify.design/lucide-calculator.svg" alt="Результат расчета" class="result-icon"/>
                            <span class="result-title">Предварительная стоимость гарантии</span>
                        </div>
                        <div id="resultValue" class="result-value">—</div>
                        <div class="result-meta">
                            <div class="meta-chip">
                                <img src="https://api.iconify.design/lucide-percent.svg" alt="Ставка"/>
                                <span id="rateLabel" class="meta-text">Ставка: —</span>
                            </div>
                            <div class="meta-chip">
                                <img src="https://api.iconify.design/lucide-clock-3.svg" alt="Срок"/>
                                <span id="termLabel" class="meta-text">Срок: 3 мес.</span>
                            </div>
                            <div class="meta-chip">
                                <img src="https://api.iconify.design/lucide-wallet.svg" alt="Сумма"/>
                                <span id="amountLabel" class="meta-text">Аванс: —</span>
                            </div>
                        </div>
                        <p class="disclaimer">Расчет носит ориентировочный характер. Финальные условия определяются банком после анализа документов.</p>
                        <div class="result-cta">
                            <a href="#contact" class="gjs-t-button">Получить точное предложение</a>
                        </div>
                    </aside>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact-section">
            <div class="contact-container">
                <div class="contact-header">
                    <h2 class="gjs-t-h2 contact-title">Оставьте заявку — начнем сегодня</h2>
                    <p class="contact-subtitle">Заполните форму, и мы свяжемся с вами в ближайшее время для уточнения деталей.</p>
                </div>
                <div class="contact-grid">
                    <form method="get" class="gjs-t-border contact-form">
                        <div class="form-row">
                            <div class="form-field">
                                <label for="name">Ваше имя</label>
                                <input type="text" id="name" name="name" required placeholder="Иван Иванов"/>
                            </div>
                            <div class="form-field">
                                <label for="phone">Телефон</label>
                                <input type="tel" id="phone" name="phone" required placeholder="+7 (___) ___-__-__"/>
                            </div>
                        </div>
                        <div class="form-field">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required placeholder="name@company.ru"/>
                        </div>
                        <div class="form-field">
                            <label for="message">Кратко опишите задачу</label>
                            <textarea id="message" name="message" rows="4" placeholder="Сумма аванса, срок, требования заказчика"></textarea>
                        </div>
                        <button type="submit" class="gjs-t-button submit-button">Отправить заявку</button>
                    </form>
                    <aside class="contact-aside">
                        <div class="gjs-t-border contact-card">
                            <div class="contact-row">
                                <img src="https://api.iconify.design/lucide-phone.svg" alt="Телефон" class="contact-icon-phone"/>
                                <a href="tel:+74999112437" class="gjs-t-link contact-phone-link">+7 (499) 911-24-37</a>
                            </div>
                            <div class="contact-row">
                                <img src="https://api.iconify.design/lucide-mail.svg" alt="Email" class="contact-icon-mail"/>
                                <a href="mailto:zayavka@bizfin.ru" class="gjs-t-link contact-mail-link">zayavka@bizfin.ru</a>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="faq-section">
            <div class="faq-container">
                <div class="faq-header">
                    <h2 class="gjs-t-h2 faq-title">Часто задаваемые вопросы</h2>
                    <p class="faq-subtitle">Коротко о главном — условия, сроки и требования к получению гарантии.</p>
                </div>
                <div class="faq-list">
                    <details class="gjs-t-border faq-item">
                        <summary class="faq-question">
                            Какие документы нужны?
                            <img src="https://api.iconify.design/lucide-help-circle.svg" alt="Подробнее" class="faq-icon"/>
                        </summary>
                        <p class="faq-answer">Учредительные документы, финансовая отчетность, договор с авансом и проект гарантии. Перечень может отличаться в зависимости от банка.</p>
                    </details>
                    <details class="gjs-t-border faq-item">
                        <summary class="faq-question">
                            Сколько занимает оформление?
                            <img src="https://api.iconify.design/lucide-clock.svg" alt="Сроки" class="faq-icon"/>
                        </summary>
                        <p class="faq-answer">От 24 часов при полном пакете документов. Сложные случаи — до 3–5 рабочих дней.</p>
                    </details>
                    <details class="gjs-t-border faq-item">
                        <summary class="faq-question">
                            Как рассчитывается стоимость?
                            <img src="https://api.iconify.design/lucide-calculator.svg" alt="Стоимость" class="faq-icon"/>
                        </summary>
                        <p class="faq-answer">Комиссия зависит от суммы аванса, срока гарантии и финансовых показателей компании. Предложим лучшие ставки у партнеров.</p>
                    </details>
                    <details class="gjs-t-border faq-item">
                        <summary class="faq-question">
                            Работаете с госконтрактами?
                            <img src="https://api.iconify.design/lucide-badge-check.svg" alt="Госконтракты" class="faq-icon"/>
                        </summary>
                        <p class="faq-answer">Да, оформляем гарантии в соответствии с 44‑ФЗ/223‑ФЗ, учитываем требования заказчика и казначейства.</p>
                    </details>
                </div>
            </div>
        </section>
    </main>

    <script>
        (function(){
            const form = document.getElementById('calcForm');
            const amountInput = document.getElementById('amount');
            const termSelect = document.getElementById('term');
            const ratingInput = document.getElementById('rating');

            const resultValue = document.getElementById('resultValue');
            const rateLabel = document.getElementById('rateLabel');
            const termLabel = document.getElementById('termLabel');
            const amountLabel = document.getElementById('amountLabel');

            const fmtRub0 = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB', maximumFractionDigits: 0 });
            const fmtPct = new Intl.NumberFormat('ru-RU', { style: 'percent', minimumFractionDigits: 2, maximumFractionDigits: 2 });

            function normalizeText(v){ return (v || '').toString().trim(); }

            function detectRate(src){
                const raw = normalizeText(src);
                const lower = raw.toLowerCase();
                const upper = raw.toUpperCase();

                // Keywords in Russian
                if (lower.includes('выс')) return { rate: 0.01, label: 'Высокий (≈1%)' };
                if (lower.includes('сред')) return { rate: 0.02, label: 'Средний (≈2%)' };
                if (lower.includes('низ')) return { rate: 0.03, label: 'Низкий (≈3%)' };

                // Common letter ratings
                if (/^(AAA|AA\+?|A\+?)$/.test(upper)) return { rate: 0.01, label: `${upper} (≈1%)` };
                if (/^(BBB\+?|BB\+?)$/.test(upper)) return { rate: 0.02, label: `${upper} (≈2%)` };
                if (/^(B\+?|CCC|CC|C|D)$/.test(upper)) return { rate: 0.03, label: `${upper} (≈3%)` };

                // Default medium if unspecified
                return { rate: 0.02, label: 'Средний (по умолчанию, 2%)', isDefault: true };
            }

            function validateAmount(){
                const val = Number(amountInput.value.replace(/\s/g, ''));
                const ok = Number.isFinite(val) && val > 0;
                return ok ? val : null;
            }

            function updateLabels({amount, months, rateInfo, cost}){
                termLabel.textContent = `Срок: ${months} мес.`;
                amountLabel.textContent = amount ? `Аванс: ${fmtRub0.format(amount)}` : 'Аванс: —';
                rateLabel.textContent = `Ставка: ${fmtPct.format(rateInfo.rate)}`;

                if (Number.isFinite(cost)){
                    resultValue.textContent = fmtRub0.format(cost);
                } else {
                    resultValue.textContent = '—';
                }
            }

            function calculate(){
                const amount = validateAmount();
                const months = Number(termSelect.value) || 0;
                const rateInfo = detectRate(ratingInput.value);

                let cost = null;
                if (amount && months > 0){
                    cost = amount * rateInfo.rate * months / 12;
                }
                updateLabels({amount, months, rateInfo, cost});
            }

            // Real-time updates
            amountInput.addEventListener('input', calculate);
            termSelect.addEventListener('change', calculate);
            ratingInput.addEventListener('input', calculate);

            form.addEventListener('submit', function(e){
                e.preventDefault();
                calculate();
            });

            // Initialize with defaults
            calculate();
        })();
    </script>
</div>
