<?php
/**
 * –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —à–æ—Ä—Ç–∫–æ–¥–æ–º
 * Company Rating Checker - Test Shortcode Page
 */

// –ü–æ–¥–∫–ª—é—á–∞–µ–º WordPress
require_once('../../../wp-config.php');

echo "üîç –°–û–ó–î–ê–ù–ò–ï –¢–ï–°–¢–û–í–û–ô –°–¢–†–ê–ù–ò–¶–´ –° –®–û–†–¢–ö–û–î–û–ú\n";
echo "==========================================\n\n";

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —à–æ—Ä—Ç–∫–æ–¥–æ–º
$existing_page = get_page_by_path('company-rating-test');

if ($existing_page) {
    echo "‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: ID {$existing_page->ID}\n";
    echo "üîó URL: " . get_permalink($existing_page->ID) . "\n\n";
} else {
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    $page_data = array(
        'post_title' => '–¢–µ—Å—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –∫–æ–º–ø–∞–Ω–∏–∏',
        'post_content' => '
<h2>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∫–æ–º–ø–∞–Ω–∏–∏</h2>
<p>–í–≤–µ–¥–∏—Ç–µ –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:</p>

[company_rating_checker]

<h3>üìä –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–µ–π—Ç–∏–Ω–≥–∞:</h3>
<p>–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–ø–∞–Ω–∏—é –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º:</p>
<ul>
<li><strong>–ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</strong> - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ DaData API</li>
<li><strong>–ï–ì–†–Æ–õ –¥–∞–Ω–Ω—ã–µ</strong> - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞</li>
<li><strong>–ú–°–ü —Å—Ç–∞—Ç—É—Å</strong> - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è</li>
<li><strong>–ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ —Ä–∏—Å–∫–∏</strong> - —Å—É–¥–µ–±–Ω—ã–µ —Ä–∞–∑–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤–∞</li>
<li><strong>–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–∫—É–ø–∫–∏</strong> - —Ä–µ–ø—É—Ç–∞—Ü–∏—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</li>
<li><strong>–§–ù–° –¥–∞–Ω–Ω—ã–µ</strong> - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</li>
<li><strong>–†–æ—Å—Å—Ç–∞—Ç –¥–∞–Ω–Ω—ã–µ</strong> - —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</li>
<li><strong>–ï–§–†–°–ë –¥–∞–Ω–Ω—ã–µ</strong> - –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞</li>
<li><strong>–†–ù–ü –¥–∞–Ω–Ω—ã–µ</strong> - –Ω–µ–¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏</li>
<li><strong>–§–°–°–ü –¥–∞–Ω–Ω—ã–µ</strong> - –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</li>
</ul>

<p><strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª:</strong> 195 –±–∞–ª–ª–æ–≤</p>
<p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–∫—Ç–æ—Ä–æ–≤:</strong> 15</p>
        ',
        'post_status' => 'publish',
        'post_type' => 'page',
        'post_name' => 'company-rating-test'
    );
    
    $page_id = wp_insert_post($page_data);
    
    if ($page_id && !is_wp_error($page_id)) {
        echo "‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ: ID {$page_id}\n";
        echo "üîó URL: " . get_permalink($page_id) . "\n\n";
    } else {
        echo "‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã\n";
        if (is_wp_error($page_id)) {
            echo "   " . $page_id->get_error_message() . "\n";
        }
    }
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ —à–æ—Ä—Ç–∫–æ–¥
echo "üîß –ü–†–û–í–ï–†–ö–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò –®–û–†–¢–ö–û–î–ê:\n";
echo "==================================\n";

if (shortcode_exists('company_rating_checker')) {
    echo "‚úÖ –®–æ—Ä—Ç–∫–æ–¥ [company_rating_checker] –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω\n";
} else {
    echo "‚ùå –®–æ—Ä—Ç–∫–æ–¥ [company_rating_checker] –ù–ï –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω\n";
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —à–æ—Ä—Ç–∫–æ–¥—ã
global $shortcode_tags;
echo "\nüìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —à–æ—Ä—Ç–∫–æ–¥—ã:\n";
foreach ($shortcode_tags as $tag => $function) {
    if (strpos($tag, 'company') !== false || strpos($tag, 'rating') !== false) {
        echo "   ‚úÖ [{$tag}] - " . (is_array($function) ? get_class($function[0]) . '::' . $function[1] : $function) . "\n";
    }
}

echo "\n‚è∞ –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: " . date('Y-m-d H:i:s') . "\n";
echo "üéØ –°–û–ó–î–ê–ù–ò–ï –¢–ï–°–¢–û–í–û–ô –°–¢–†–ê–ù–ò–¶–´ –ó–ê–í–ï–†–®–ï–ù–û!\n";
echo "========================================\n";
?>
